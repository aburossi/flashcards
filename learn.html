<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- The title will be set dynamically based on assignmentId or default subject -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lernkarteien</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- The page title will be updated via script -->
    <h1 id="page-title">Loading...</h1>
    
    <!-- Navigation controls moved above the flashcard container -->
    <div class="controls" id="controls">
      <button id="prev" title="Previous (←)">←</button>
      <button id="flip" title="Flip (↑/↓)">Flip</button>
      <button id="next" title="Next (→)">→</button>
    </div>
    
    <!-- Flashcard container (Learn Mode only) -->
    <div class="flashcard-container" id="flashcard-container">
      <div class="flashcard" id="flashcard">
        <div class="front" id="front">Question</div>
        <div class="back" id="back">Answer</div>
      </div>
    </div>
    
    <!-- German notice for keyboard navigation -->
    <p style="text-align: center; margin-top: 10px;">
      Nutzen Sie die Pfeiltasten auf der Tastatur zur Navigation.
    </p>
  </div>

  <!-- Set a global flag to signal learn mode -->
  <script>
    window.appMode = 'learn';
  </script>

  <!-- Implementation script -->
  <script>
    // Helper function to replace all ß with ss in a string.
    function cleanText(text) {
      return text.replace(/ß/g, 'ss');
    }

    // Fetch JSON data for learn mode from data_learn.json.
    // The JSON is expected to have keys: title, question, and answer.
    fetch('data_learn.json')
      .then(response => response.text())
      .then(rawText => {
        // Clean the raw JSON text.
        const cleanedText = cleanText(rawText);
        // Parse the cleaned text into a JSON object.
        const data = JSON.parse(cleanedText);

        // Update the page title if provided.
        if (data.title) {
          document.getElementById('page-title').innerText = cleanText(data.title);
        }
        // Update the flashcard content.
        if (data.question) {
          document.getElementById('front').innerText = cleanText(data.question);
        }
        if (data.answer) {
          document.getElementById('back').innerText = cleanText(data.answer);
        }
      })
      .catch(error => console.error('Error loading JSON data:', error));
  </script>
</body>
</html>
